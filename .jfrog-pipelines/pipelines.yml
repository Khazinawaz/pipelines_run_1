resources:
  - name: self_repo_tests
    type: GitRepo
    configuration:
      path: Khazinawaz/pipelines_run_1
      branches:
        include: ^{{gitBranch}}$
      gitProvider: nawaz_gh1

pipelines:
  - name: Check_Save_Tests
    steps:
      - name: checkSaveTests
        type: Bash
        configuration:
          environmentVariables:
            "SUITES": 1
            "PASSED": 1
            "FAILURE": 1
            "ERROR": 1
            "SKIPPED": 1
          inputResources:
            - name: self_repo_tests
        execution: 
          onExecute:
            - pushd $res_self_repo_tests_resourcePath
            - npm install
            - node generateTests.js
            - mkdir -p testReports
            - mv test-report.xml testReports/test-report.xml
            - save_tests testReports
